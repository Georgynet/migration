# Механизм миграций для БД
Простой механизм реализующий просмотр списка доступных миграций. Поднятие происходит до максимально доступной миграции. Отменять можно пошагово.

Для использования необходимо создать экземпляр класса MigrationApp, передать ему консольное приложение, подключение к БД и конфиг.

Пример конфига:

```php
return [
    'migration_path' => dirname(dirname(__DIR__)) . DIRECTORY_SEPARATOR . 'migrations',
    'migration_table_name' => 'migration_table'
];
```

После этого инициализировать механизм миграций консольной командой:

```
php ./bin/console migrate:init
```

В БД появится таблица, имя которой задаётся через конфиг в поле ```migration_table_name```. Таблица хранит историю применения миграций.

Для создания новой миграции используется команда (с необязательным аттрибутом, задающим имя миграции):

```
php ./bin/console migrate:new [name]
```

После этого в директории, заданной через конфиг в поле ```migration_path``` появится класс с двумя методами ```up``` и ```down```, которые должны возвращать текст запросов, выполняемых для применения и отмены миграции, соответственно.

Список доступных миграций можно посмотреть, воспользовавшись коммандой:

```
php ./bin/console migrate:list
```

Для применения миграции используется команда:

```
php ./bin/console migrate:up
```

Повышение происходит до максимально доступной версии миграции.

Для отмены используется команда, с необязательным аттрибутом, принимающим количество откатываемых миграций:

```
php ./bin/console migrate:down [step]
```
