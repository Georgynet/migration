<?php

require_once dirname(__DIR__) . '/vendor/autoload.php';

set_time_limit(0);

use Sllite\MigrationApp;
use Symfony\Component\Console\Application;


$dsn = 'mysql:dbname=test;host=localhost';
$user = 'pma';
$password = 'pma';

try {
    $dbh = new PDO($dsn, $user, $password);
} catch (PDOException $e) {
    echo 'Подключение не удалось: ' . $e->getMessage();
}

$console = new Application('MigrationApp', '1.0');

$config = require dirname(__DIR__) . '/src/config/config.php';

$migrationApp = new MigrationApp($console, $dbh, $config);

$console->run();
